<h1>Students</h1>

<div class="row mb-4">
  <div class="col-md-8">
    <%= form_tag students_path, method: :get, class: 'form-inline' do %>
      <div class="input-group mr-2">
        <%= text_field_tag :search, params[:search], class: 'form-control', placeholder: 'Search by name, email, or phone...' %>
      </div>
      <div class="input-group mr-2">
        <%= select_tag :course_id,
          options_from_collection_for_select(@courses, 'id', 'name', params[:course_id]),
          prompt: 'Filter by Course',
          class: 'form-control' %>
      </div>
      <%= submit_tag 'Search', class: 'btn btn-primary' %>
      <%= link_to 'Clear', students_path, class: 'btn btn-secondary ml-2' %>
    <% end %>
  </div>
  <div class="col-md-4 text-right">
    <%= link_to 'New Student', new_student_path, class: 'btn btn-success' %>
  </div>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Image</th> <!-- ðŸ–¼ Added image column -->
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Enrollment Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @students.each do |student| %>
      <tr>
        <td>
          <% if student.image.attached? %>
            <%= image_tag student.image, class: "img-thumbnail rounded-circle", style: "width: 60px; height: 60px; object-fit: cover;" %>
          <% else %>
            <span class="text-muted">No image</span>
          <% end %>
        </td>
        <td><%= student.name %></td>
        <td><%= student.email %></td>
        <td><%= student.phone %></td>
        <td><%= student.enrollment_date %></td>
        <td>
          <%= link_to 'View', student_path(student), class: 'btn btn-info btn-sm' %>
          <%= link_to 'Edit', edit_student_path(student), class: 'btn btn-warning btn-sm' %>
          <%= link_to 'Delete', student_path(student), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
